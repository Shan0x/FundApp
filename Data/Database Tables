CREATE TYPE Status AS ENUM ('ACTIVE', 'INACTIVE');

CREATE TABLE IF NOT EXISTS public."Users"
(
    "userID" integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    "userName" character varying COLLATE pg_catalog."default" NOT NULL,
    "userPassword" character varying COLLATE pg_catalog."default" NOT NULL,
    "userFirstName" character varying COLLATE pg_catalog."default" NOT NULL,
    "userLastName" character varying COLLATE pg_catalog."default" NOT NULL,
    "userEmail" character varying COLLATE pg_catalog."default" NOT NULL,
    "userDOB" date NOT NULL,
    CONSTRAINT users_pkey PRIMARY KEY ("userID")
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS public."Users"
    OWNER to postgres;

CREATE TABLE Payment (
    userID smallserial REFERENCES Users(userID) PRIMARY KEY,
    cardNumber smallint UNIQUE,
    cardholderName character varying(255),
    cvcNumber smallint,
    expirationDate date
);

CREATE TABLE IF NOT EXISTS public."Fundraiser"
(
    "fundraiserID" smallint NOT NULL DEFAULT nextval('"Fundraiser_fundraiserID_seq"'::regclass),
    "userID" smallint NOT NULL DEFAULT nextval('"Fundraiser_userID_seq"'::regclass),
    "fundraiserStatus" "Status" DEFAULT 'ACTIVE'::"Status",
    "fundraiserName" character varying(255) COLLATE pg_catalog."default" NOT NULL,
    "fundraiserSummary" text COLLATE pg_catalog."default" NOT NULL,
    "fundraiserGoalAmount" numeric NOT NULL,
    "fundraiserDateCreated" date DEFAULT CURRENT_DATE,
    "totalDonations" double precision NOT NULL DEFAULT 0,
    CONSTRAINT "Fundraiser_pkey" PRIMARY KEY ("fundraiserID"),
    CONSTRAINT "Fundraiser_userID_fkey" FOREIGN KEY ("userID")
        REFERENCES public."Users" ("userID") MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS public."Fundraiser"
    OWNER to postgres;

CREATE TABLE IF NOT EXISTS public."Donations"
(
    "donationID" smallint NOT NULL DEFAULT nextval('"Donations_donationID_seq"'::regclass),
    "fundraiserID" smallint NOT NULL DEFAULT nextval('"Donations_fundraiserID_seq"'::regclass),
    "donationAmount" numeric NOT NULL,
    "donatorName" character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'Anonymous'::character varying,
    "donationDate" date DEFAULT CURRENT_DATE,
    CONSTRAINT "Donations_pkey" PRIMARY KEY ("donationID"),
    CONSTRAINT "Donations_fundraiserID_fkey" FOREIGN KEY ("fundraiserID")
        REFERENCES public."Fundraiser" ("fundraiserID") MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS public."Donations"
    OWNER to postgres;
